<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>WordBomb Helper – Dictionnaire</title>
<style>
body { margin:0; font-family:Arial,sans-serif; background:#0b0f14; color:#e6edf3; display:flex; min-height:100vh; }
.sidebar { width:220px; background:#070b10; border-right:1px solid #111; display:flex; flex-direction:column; padding-top:20px; }
.sidebar h2 { color:#7bc8ff; text-align:center; margin-bottom:20px; }
.sidebar a { text-decoration:none; color:#e6edf3; padding:12px 20px; margin:5px; border-radius:10px; transition:0.2s; background:#13374a; text-align:center; font-weight:bold; }
.sidebar a:hover { background:#18506a; transform:translateY(-2px); }
.main { flex:1; padding:40px; display:flex; flex-direction:column; align-items:center; }
header { background:#070b10; padding:20px; text-align:center; border-bottom:1px solid #111; width:100%; margin-bottom:20px; }
header h1 { margin:0; color:#7bc8ff; }
.search-box { background:#13374a; padding:25px; border-radius:12px; width:100%; max-width:550px; display:flex; flex-direction:column; margin-bottom:30px; box-shadow:0 0 15px #000a; }
.search-box label { margin:5px 0; font-weight:bold; font-size:14px; }
.search-box input, .search-box select { padding:10px; margin-bottom:15px; border-radius:8px; border:none; font-size:16px; }
.search-box input:focus, .search-box select:focus { outline:none; box-shadow:0 0 5px #7bc8ff; }
.word-section { width:100%; display:flex; justify-content:space-around; flex-wrap:wrap; }
.word-box { background:#13374a; padding:20px; border-radius:12px; margin:10px; min-width:200px; max-height:300px; overflow-y:auto; box-shadow:0 0 10px #0008; }
.word-box h3 { color:#7bc8ff; margin-bottom:15px; text-align:center; }
.word-box ul { list-style:none; padding:0; margin:0; }
.word-box li { margin:5px 0; padding:5px 8px; border-radius:6px; transition:0.2s; }
.word-box li:hover { background-color:#18506a; cursor:default; }
.highlight { color:#ffd700; font-weight:bold; }
footer { text-align:center; font-size:14px; opacity:0.5; margin-top:40px; }
</style>
</head>
<body>

<div class="sidebar">
  <h2>Menu</h2>
  <a href="index.html">Accueil</a>
  <a href="grille.html">Grille</a>
  <a href="sub1.html">SUB1</a>
  <a href="all.html">All</a>
  <a href="json.html">JSON</a>
  <a href="dictionnaire.html">Dictionnaires</a>
</div>

<div class="main">
  <header>
    <h1>BILLIE EILISH <3</h1>
  </header>

  <div class="search-box">
    <label for="syllabe">Syllabe :</label>
    <input type="text" id="syllabe" placeholder="Ex: DE">

    <label for="dico">Dictionnaire :</label>
    <select id="dico">
      <option value="FR.txt">FR</option>
      <option value="MIXTE.txt">MIXTE</option>
      <option value="EN.txt">EN</option>
    </select>

    <label for="contain">Contient :</label>
    <input type="text" id="contain" placeholder="Lettre contenue">

    <label for="start">Commence par :</label>
    <input type="text" id="start" placeholder="Lettre initiale">
  </div>

  <div class="word-section">
    <div class="word-box">
      <h3>5 plus courts</h3>
      <ul id="shortest"></ul>
    </div>
    <div class="word-box">
      <h3>5 plus longs</h3>
      <ul id="longest"></ul>
    </div>
    <div class="word-box">
      <h3>5 aléatoires</h3>
      <ul id="random"></ul>
    </div>
  </div>

  <footer>
    BILLIE JE T'AIME.
  </footer>
</div>

<script>
let dictionaryCache = {file: '', words: []};

// Charger le dictionnaire depuis le site
async function loadDictionary(file) {
  if (dictionaryCache.file === file) return dictionaryCache.words;
  const response = await fetch(file);
  const text = await response.text();
  const words = text.split(/\r?\n/).filter(w => w.trim().length).map(w => w.toUpperCase());
  dictionaryCache = {file, words};
  return words;
}

// Filtrer les mots
function filterWords(words, syllabe, contain, start) {
  let result = words.filter(w => w.includes(syllabe));

  if (contain) {
    const filtered = result.filter(w => w.includes(contain.toUpperCase()));
    if (filtered.length) result = filtered;
  }

  if (start) {
    const filteredStart = result.filter(w => w.startsWith(start.toUpperCase()));
    if (filteredStart.length) result = filteredStart;
  }

  // Si aucun mot ne correspond, on retourne quand même mots contenant la syllabe
  if (result.length === 0) result = words.filter(w => w.includes(syllabe));

  return result;
}

// Obtenir mots aléatoires
function getRandomWords(words, count) {
  const shuffled = [...words].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, count);
}

// Affichage avec surlignage
function displayWords(id, words, syllabe) {
  const ul = document.getElementById(id);
  ul.innerHTML = '';
  const regex = new RegExp(`(${syllabe})`, 'gi');
  words.forEach(w => {
    const li = document.createElement('li');
    li.innerHTML = w.replace(regex, '<span class="highlight">$1</span>');
    ul.appendChild(li);
  });
}

// Générer automatiquement
async function generateWords() {
  const syllabe = document.getElementById('syllabe').value.toUpperCase();
  const file = document.getElementById('dico').value;
  const contain = document.getElementById('contain').value.toUpperCase();
  const start = document.getElementById('start').value.toUpperCase();

  if (syllabe.length < 2) {
    displayWords('shortest', [], '');
    displayWords('longest', [], '');
    displayWords('random', [], '');
    return;
  }

  const words = await loadDictionary(file);
  const filtered = filterWords(words, syllabe, contain, start);

  const shortest = filtered.slice().sort((a,b)=>a.length-b.length).slice(0,5);
  const longest = filtered.slice().sort((a,b)=>b.length-a.length).slice(0,5);
  const random = getRandomWords(filtered, 5);

  displayWords('shortest', shortest, syllabe);
  displayWords('longest', longest, syllabe);
  displayWords('random', random, syllabe);
}

// Détecter la saisie automatique
['syllabe','contain','start'].forEach(id => {
  document.getElementById(id).addEventListener('input', generateWords);
});
document.getElementById('dico').addEventListener('change', generateWords);

</script>
</body>
</html>
